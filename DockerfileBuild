FROM bitnami/java:16 as build
COPY /src /app/src
COPY /gradle /app/gradle
COPY build.gradle gradlew settings.gradle /app/
WORKDIR /app
RUN chmod -R 777 *
RUN ./gradlew build -x test

COPY ./build/libs/tetris-0.1.0-SNAPSHOT.jar /app/app.jar
EXPOSE 8080
CMD ["java", "-jar", "app.jar"]
